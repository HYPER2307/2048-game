for(var e=document.querySelector(".game-score"),r=document.querySelector(".message-start"),t=document.querySelector(".message-lose"),n=document.querySelector(".message-win"),o=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],c=0,a=!0,s=function(e,r){e.innerText="",e.classList.value="",e.classList.add("field-cell"),r>0&&(e.innerText=r,e.classList.add("field-cell--".concat(r)))},i=0;i<4;i++)for(var l=document.querySelectorAll(".field-row")[i].querySelectorAll(".field-cell"),d=0;d<4;d++){var f=l[d];f.id=i+"-"+d,s(f,o[i][d])}var u=function(){for(var e=0;e<4;e++)for(var r=0;r<4;r++)s(document.getElementById("".concat(e,"-").concat(r)),o[e][r])},v=function(){for(var e,r=[],t=0;t<4;t++)for(var n=0;n<4;n++)0===o[t][n]&&r.push({row:t,col:n});if(r.length&&a){if(16===r.length)for(var c=0;c<2;c++){var s=Math.floor(Math.random()*r.length),i=r[s===e?0:s],l=i.row,d=i.col;e=s,o[l][d]=2}else{var f=Math.floor(Math.random()*r.length),v=r[f],m=v.row,h=v.col;o[m][h]=.9>Math.random()?2:4}u()}},m=function(e){return e.filter(function(e){return 0!==e})},h=function(r){e.innerText=r,e.value=0!==r?"".concat(r):""},g=function(e){for(var r=m(e),t=0;t<r.length-1;t++)r[t]===r[t+1]&&(r[t]*=2,r[t+1]=0,c+=r[t],a=!0);for(h(c),r=m(r);r.length<4;)r.push(0);return JSON.stringify(r)!==JSON.stringify(e)&&(a=!0),r},y=function(){a=!1;for(var e=0;e<4;e++){o[e]=g(o[e]);for(var r=0;r<4;r++)s(document.getElementById("".concat(e,"-").concat(r)),o[e][r])}},L=function(){a=!1;for(var e=0;e<4;e++){var r=o[e].reverse();r=g(r).reverse(),o[e]=r;for(var t=0;t<4;t++)s(document.getElementById("".concat(e,"-").concat(t)),o[e][t])}},w=function(){a=!1;for(var e=0;e<4;e++){var r=[o[0][e],o[1][e],o[2][e],o[3][e]];r=g(r);for(var t=0;t<4;t++)o[t][e]=r[t],o[t][e]=r[t],o[t][e]=r[t],o[t][e]=r[t],s(document.getElementById("".concat(t,"-").concat(e)),o[t][e])}},S=function(){a=!1;for(var e=0;e<4;e++){var r=[o[0][e],o[1][e],o[2][e],o[3][e]].reverse();r=g(r).reverse(),o[0][e]=r[0],o[1][e]=r[1],o[2][e]=r[2],o[3][e]=r[3];for(var t=0;t<4;t++)s(document.getElementById("".concat(t,"-").concat(e)),o[t][e])}},E=function(){for(var e=!1,r=0;r<4;r++)for(var t=o[r],n=0;n<3;n++)(t[n]===t[n+1]||0===t[n])&&(e=!0);for(var c=0;c<4;c++)for(var a=[o[0][c],o[1][c],o[2][c],o[3][c]],s=0;s<4;s++)(a[s]===a[s+1]||0===a[s])&&(e=!0);return e},q=function(){var e=!1;return o.forEach(function(r){2048===r&&(e=!0)}),e},A=function(){a=!0,o=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],v(),h(c=0),t.classList.add("hidden"),n.classList.add("hidden")},p=function(){v(),r.classList.add("hidden");var e={ArrowLeft:{slide:function(){y(),v()}},ArrowRight:{slide:function(){L(),v()}},ArrowUp:{slide:function(){w(),v()}},ArrowDown:{slide:function(){S(),v()}}};document.addEventListener("keydown",function(r){var o=r.key;e.hasOwnProperty(o)&&(e[o].slide(),E()||t.classList.remove("hidden"),q()&&n.classList.remove("hidden"))})};document.addEventListener("click",function(e){var r=e.target,t=r.closest(".start"),n=r.closest(".restart");t&&(p(),t.classList.remove("start"),t.classList.add("restart"),t.innerText="Restart",t.style.fontSize="18px"),n&&A()});
//# sourceMappingURL=index.7325d70c.js.map
